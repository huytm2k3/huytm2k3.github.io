<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords"><meta name="author" content="Ta Minh Huy,undefined"><meta name="copyright" content="Ta Minh Huy"><title>【Minh Huy Blog】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Success',
    error: 'Error',
    noSupport: 'No Support'
  },
  gitment: {},
  valine: {},
}</script><meta name="generator" content="Hexo 6.2.0"></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="author-info"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">Ta Minh Huy</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/huytm2k3" target="_blank">GitHub<i class="icon-dot bg-color3"></i></a><a class="links-button button-hover" href="mailto:huyat180522@gmail.com" target="_blank">E-Mail<i class="icon-dot bg-color6"></i></a><a class="links-button button-hover" href="https://www.facebook.com/profile.php?id=100072417355186" target="_blank">Facebook<i class="icon-dot bg-color6"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">Post</span><span class="pull-bottom">59</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">Tags</span><span class="pull-bottom">42</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">Categories</span><span class="pull-bottom">5</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">Trang chủ</a><a class="menu-item" href="/tags">Thẻ</a><a class="menu-item" href="/categories">Danh mục</a><a class="menu-item" href="/archives">Mục lục</a><a class="menu-item" href="/about">Giới thiệu</a><a class="menu-item" href="/plan">Kế hoạch 2023</a><a class="menu-item" href="/sumary22">Tổng kết 2022</a><a class="menu-item" href="/book">Sách hay</a></nav><script src="/js/audio_autoplay.js"></script><div class="right-info"><audio controls="" autoplay="" id="bg-music" style="display: none"><source src="/audio/bgmusic.mp3" type="audio/mpeg"></audio><a class="title-name" href="/">Minh Huy Blog</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><div id="recent-posts"><!-- each post in page.posts.sort('date', -1).limit(10).toArray()--><!-- config中配置按照什么排序--><div class="recent-post-item"><a class="post-title" href="/2023/01/31/Dockerfile-syntax/">Dockerfile syntax</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> Modified 2023-03-21</time></div><div class="post-content"><div class="main-content content"><h2 id="Dockerfile-la-gi"><a href="#Dockerfile-la-gi" class="headerlink" title="Dockerfile là gì?"></a>Dockerfile là gì?</h2><p>Dockerfile là gì? Dockerfile là một file dạng text không có phần đuôi mở rộng, chứa các đặc tả về một trường thực thi phần mềm, cấu trúc cho Docker Image. Từ những câu lệnh đó, Docker sẽ build ra Docker image (thường có dung lượng nhỏ từ vài MB đến lớn vài GB).</p>
<h2 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h2><p>Trước hết thì mình có example về 1 Dockerfile file dùng để build 1 máy ảo linux có chứa tool tippecanoe</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ver của máy ảo</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">22.04</span> </span><br><span class="line"><span class="comment"># Các câu lệnh terminal - vì đã lấy được quyền root sẵn khi tạo container nên không cần sudo</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp;  ACCEPT_EULA=Y </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install nodejs -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install git -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install make -y</span></span><br><span class="line"><span class="comment"># Giống cd - change directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> ~</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/mapbox/tippecanoe.git</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> tippecanoe/</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install g++ -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install build-essential libsqlite3-dev zlib1g-dev -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> make \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># Tên user</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> useradd -ms /bin/bash apprunner</span></span><br><span class="line"><span class="keyword">USER</span> apprunner</span><br></pre></td></tr></table></figure></div></div><a class="button-hover more" href="/2023/01/31/Dockerfile-syntax/#more">Đọc tiếp</a></div><div class="recent-post-item"><a class="post-title" href="/2022/12/23/Docker-tutorial/">Docker tutorial</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> Modified 2023-03-21</time></div><div class="post-content"><div class="main-content content"><h2 id="Docker-la-gi-Tai-sao-lai-can-Docker"><a href="#Docker-la-gi-Tai-sao-lai-can-Docker" class="headerlink" title="Docker là gì? Tại sao lại cần Docker?"></a>Docker là gì? Tại sao lại cần Docker?</h2><p>Docker là một dự án mã nguồn mở giúp tự động triển khai các ứng dụng Linux và Windows vào trong các container ảo hóa. Docker cung cấp một lớp trừu tượng và tự động ảo hóa dựa trên Linux.<br>Docker dùng để đóng gói phần mềm, mã nguồn giúp khách hàng - người dùng gom và cài đặt và sử dụng sản phẩm một cách dễ dàng hơn mà không cần phải cài đặt nhiều gói tài nguyên cần thiết.<br><a target="_blank" rel="noopener" href="http://docker.com/">http://docker.com</a></p>
<h2 id="Getting-started-voi-Docker-Desktop-Chuan-bi-moi-truong-cho-Docker"><a href="#Getting-started-voi-Docker-Desktop-Chuan-bi-moi-truong-cho-Docker" class="headerlink" title="Getting started với Docker Desktop - Chuẩn bị môi trường cho Docker"></a>Getting started với Docker Desktop - Chuẩn bị môi trường cho Docker</h2><p>Source: <a target="_blank" rel="noopener" href="http://docker.com/get-started">http://docker.com/get-started</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 docker/getting-started</span><br></pre></td></tr></table></figure>

<p>Chạy dự án ở local:</p>
<p>Clone project getting-started</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/docker/getting-started.git</span><br></pre></td></tr></table></figure>

<p>Change dir tới thư mục .&#x2F;app</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> app</span><br></pre></td></tr></table></figure>

<p>Tạo file Dockerfile để config build cho Docker:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">16</span>-alpine</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yarn install --production</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;node&quot;</span>, <span class="string">&quot;src/index.js&quot;</span>]</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">3000</span></span><br></pre></td></tr></table></figure>
<p>Build:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure>

<p>Run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure>

<h2 id="Update-Application"><a href="#Update-Application" class="headerlink" title="Update Application"></a>Update Application</h2><ol>
<li>Lấy danh sách ID của các container</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Dừng container cũ</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop &lt;<span class="built_in">id</span>&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Xóa container</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> &lt;<span class="built_in">id</span>&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>Run container mới</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure>

<h2 id="Share-Application"><a href="#Share-Application" class="headerlink" title="Share Application"></a>Share Application</h2><p><a target="_blank" rel="noopener" href="https://docs.docker.com/get-started/04_sharing_app/">https://docs.docker.com/get-started/04_sharing_app/</a></p>
<h2 id="Ubuntu-container"><a href="#Ubuntu-container" class="headerlink" title="Ubuntu container"></a>Ubuntu container</h2><p>Tạo mới 1 ubuntu container:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t ubuntu</span><br></pre></td></tr></table></figure>

<p>Kill 1 ubuntu container:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run &lt;container_id&gt;</span><br></pre></td></tr></table></figure>

<p>Start 1 ubuntu container đã stop:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start &lt;container_id&gt;</span><br></pre></td></tr></table></figure>

<p>Start 1 ubuntu với command line:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start -ai &lt;container_id&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Phan-biet-Image-va-Container"><a href="#Phan-biet-Image-va-Container" class="headerlink" title="Phân biệt Image và Container?"></a>Phân biệt Image và Container?</h2><p>Dễ hiểu thì Image giống với github repo, đã được đóng gói với nhiều config, nhiều depd, service và có thể lưu trữ vận chuyển và sử dụng ở nhiều nơi</p>
<p>Container là Image đã được chạy local ở máy.</p>
<h2 id="Basic-command"><a href="#Basic-command" class="headerlink" title="Basic command"></a>Basic command</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker pull &lt;image_name&gt;</span><br><span class="line">docker start &lt;image_id&gt;</span><br><span class="line">docker images <span class="comment"># List all image</span></span><br><span class="line">docker ps <span class="comment"># List all running images</span></span><br><span class="line">docker stop &lt;image_id&gt; </span><br><span class="line">docker ps -a <span class="comment"># List all running and stopped images</span></span><br><span class="line">docker run --name &lt;new_name&gt; &lt;image_name&gt; <span class="comment"># Running image without default name</span></span><br><span class="line">docker <span class="built_in">exec</span> -it &lt;image_id&gt; <span class="comment"># Open container&#x27;s terminal</span></span><br><span class="line">docker network create &lt;network_image_name&gt;</span><br></pre></td></tr></table></figure>


</div></div><a class="button-hover more" href="/2022/12/23/Docker-tutorial/#more">Đọc tiếp</a></div><div class="recent-post-item"><a class="post-title" href="/2022/12/07/Ke-hoach-hoc-tap-Thang-12-2022/">Kế hoạch học tập Tháng 12 - 2022</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> Modified 2023-03-21</time></div><div class="post-content"><div class="main-content content"><h2 id="Ke-hoach"><a href="#Ke-hoach" class="headerlink" title="Kế hoạch"></a>Kế hoạch</h2><ul>
<li>Một ngày ít nhất 5h học</li>
<li>Ôn kĩ lý thuyết căn bản NodeJS phục vụ cho phỏng vấn đầu 2023</li>
<li>Đào sâu Python, nghiên cứu Flask framework của Python (X)</li>
<li>Học PyQt6, join vào project 3d_desktop TLGEO (<a href="https://huytm2k3.github.io/2022/12/07/Python-GUI-Framework-PyQt/">https://huytm2k3.github.io/2022/12/07/Python-GUI-Framework-PyQt/</a>)</li>
<li>11 video Docker Tutorial Youtube</li>
</ul>
</div></div><a class="button-hover more" href="/2022/12/07/Ke-hoach-hoc-tap-Thang-12-2022/#more">Đọc tiếp</a></div></div><div id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/">&lt;i class&#x3D;&quot;fas fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/6/">&lt;i class&#x3D;&quot;fas fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i></span><span id="busuanzi_value_site_uv"></span><span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i></span><span id="busuanzi_value_site_pv"></span><span></span></div><div class="copyright">&copy;2022 ～ 2023 By Ta Minh Huy</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>