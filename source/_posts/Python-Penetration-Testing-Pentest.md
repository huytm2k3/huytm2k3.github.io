---
title: Python Penetration Testing (Pentest)
date: 2022-09-13 06:47:42
tags:
---

# Chapter 1: Python with Penetration Testing and Networking
## Phạm vi của pentesting
Nói đơn giản, thì pentest được sử dục cho việc đánh giá bảo mật thông tin của một công ty, một tổ chức. Bao gồm: mạng, website, cơ sở dữ liệu, máy chủ public-facing, chính sách bảo mật và mọi thứ khác do khách hàng chỉ định. Vào mỗi ngày, pentester phải trình bày báo cáo chi tiết về những phát hiện như điểm yếu, lỗ hỏng trong cơ sở hạ tầng của công ty và mức độ rủi ro của các lỗ hổng cụ thể - cung cấp giải pháp nếu có thể.
## Cần thiết cho pentesting

Có một số điểm mô tả ý nghĩa của việc pentest:
- Pentest xác định những mỗi đe dọa có thể phơi bày bảo mật của một tổ chức
- Chuyên gia pentesting đảm bảo cho tổ chức với đánh giá đầy đủ và chi tiết
- Pentesting đánh giá hiệu quả của mạng bằng cách tạo một lượng lớn truy cập
- Thay đổi hoặc nâng cấp cơ sở hạ tầng đang tồn tại của hardware, software hoặc network design có thể sẽ dẫn tới lỗ hổng - có thể phát hiện bởi pentesting
- Thế giới ngày nay, các mối đe dọa tiềm năng đang giảm đáng kể; pentesting là một proactive execise để giảm thiểu cơ hội bị lợi dụng
- Pentesting đảm bảo liệu các chính sách bảo mật phù hợp có đang được tuân thủ hay không

Một tổ chức nên tiến hành một hoạt động đánh giá rủi ro trước khi pentest.

Có thể sử dụng những tool trên chợ, có thể tự tạo tool nhờ kiến thức lập trình - Chọn python.

## Định nghĩa phạm vi của pentesting

- You should develop the scope of the project by consulting with the client. For example, if Bob (the client) wants to test the entire network infrastructure of the organization, then pentester Alice would define the scope of pentesting by taking this network into account. Alice will consult Bob on whether any sensitive or restricted areas should be included or not.

- You should take into account time, people, and money.

- You should profile the test boundaries on the basis of an agreement signed by the pentester and the client.

- Changes in business practice might affect the scope. For example, the addition of a subnet, new system component installations, the addition or modification of a web server, and so on, might change the scope of pentesting.

2 loại pentesting:
- A non-destructive test: 
    - Tìm kiếm lỗ hổng tiềm ẩn - quét và xác định hệ thống từ xa
    - Điều tra và xác minh phát hiện
    - Khai thác thích hợp, lập bản đồ lỗ hổng
    - Khai thác hệ thống từ xa 1 cách cẩn thận
    - Cung cấp bằng chứng về khái niệm
    - Không cố gắng tấn công DoS
- A destructive test: 
    - Cố gắng tấn công DoS và tràn bộ nhớ đệm - có thể gây hỏng bộ nhớ

## Các cách tiếp cận để pentesting:

Có 3 cách tiếp cận để pentesting:
- Black-box pentesting:
    - Chỉ được cung cấp tên công ty
    - Như là hacking với kiến thức của một attacker bên ngoài
    - Bạn không cần biết trước bất kì một kiến thức nào của hệ thống
    - Tiêu tốn thời gian
- White-box pentesting:
    - Bạn sẽ được cung cấp kiến thức hoàn chỉnh của cơ sở hạ tầng cần test
    - Giống như một nhân viên xấu có kiến thức phong phú về cơ sở hạ tầng của công ty
    - Được cung cấp thông tin trên cơ sở hạ tầng của công ty, network type, chính sách, được làm và không, địa chỉ IP, và IPS/IDS firewall
- Gray-box pentesting:
    - Tester thường có thông tin hạn chế về mạng / hệ thống mục tiêu được khách hàng cung cấp để giảm chi phí và giảm thử nghiệm - sai sót trên một phần của tầng áp dụng
    - Nó thực hiện đánh giá bảo mật và kiểm tra nội bộ
## Network Sockets

Một địa chỉ network socket bao gồm địa chỉ IP và Port. Một cách đơn giản, một socket là một cách để nói chuyện với một máy tính kahsc. Bằng việc định nghĩa một socket, một quá trình có thể giao tiếp với một quá trình khác trong mạng.

Để tạo một socket, sử dụng socket.socket():
```py
s = socket.socket (socket_family, socket_type, protocol=0)
```
Đây là mô tả của parameters:
```python
socket_family: socket.AF_INET, PF_PACKET
```
AF_INET là địa chỉ IPv4, PF_PACKET hoạt động ở driver layer thiết bị. Thư viện pcap cho Linux sử dụng PF_PACKET.

```python
Socket_type : socket.SOCK_DGRAM, socket.SOCK_RAW,socket.SOCK_STREAM
```

- socket.bind(address)
- socket.listen(q)
- socket.accept()
- socket.recv(bufsize)
- socket.recvfrom(bufsize)
- socket.recv_into(buffer)
- socket.recvfrom_into(buffer)
- socket.send(bytes)
- socket.sendto(data, address)
- socket.sendall(data)


