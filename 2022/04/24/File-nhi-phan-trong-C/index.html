<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="File nhị phân trong C (Binary File)"><meta name="keywords" content="C,file,binary-file"><meta name="author" content="Ta Minh Huy,undefined"><meta name="copyright" content="Ta Minh Huy"><title>File nhị phân trong C (Binary File)【My name is TaMinhHuy! Welcome to my Blog】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Success',
    error: 'Error',
    noSupport: 'No Support'
  },
  gitment: ,
  valine: ,
}</script><meta name="generator" content="Hexo 6.1.0"></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="Post Folder">Overview</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">Catalog</div><div class="sidebar-toc-progress"><span class="progress-notice">Have read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mo-dau"><span class="toc-number">1.</span> <span class="toc-text">Mở đầu</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Khai-niem"><span class="toc-number">2.</span> <span class="toc-text">Khái niệm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cach-dung"><span class="toc-number">3.</span> <span class="toc-text">Cách dùng</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Khai-bao-file"><span class="toc-number">3.1.</span> <span class="toc-text">Khai báo file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thao-tac-mo-file"><span class="toc-number">3.2.</span> <span class="toc-text">Thao tác mở file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thao-tac-ghi-file"><span class="toc-number">3.3.</span> <span class="toc-text">Thao tác ghi file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thao-tac-doc-file"><span class="toc-number">3.4.</span> <span class="toc-text">Thao tác đọc file</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">Ta Minh Huy</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/huytm2k3" target="_blank">GitHub<i class="icon-dot bg-color3"></i></a><a class="links-button button-hover" href="mailto:huyat180522@gmail.com" target="_blank">E-Mail<i class="icon-dot bg-color6"></i></a><a class="links-button button-hover" href="https://www.facebook.com/profile.php?id=100072417355186" target="_blank">Facebook<i class="icon-dot bg-color8"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">Post</span><span class="pull-bottom">10</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">Tags</span><span class="pull-bottom">15</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">Home</a><a class="menu-item" href="/tags">Tags</a><a class="menu-item" href="/categories">Categories</a><a class="menu-item" href="/archives">Archives</a><a class="menu-item" href="/about">About</a></nav><div class="right-info"><a class="title-name" href="/">My name is TaMinhHuy! Welcome to my Blog</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">File nhị phân trong C (Binary File)</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> Posted 2022-04-24 | Modified 2022-04-24</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/C/">C</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/file/">file</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/binary-file/">binary-file</a></div></div></div><div class="main-content"><h2 id="Mo-dau"><a href="#Mo-dau" class="headerlink" title="Mở đầu"></a>Mở đầu</h2><p>Bài viết này dựa trên 3 tiếng tìm hiểu về đọc&#x2F;ghi file nhị phân trong C. Sẽ cố gắng chia sẻ những thứ cơ bản mình biết về nó, hi vọng phần nào đó sẽ giúp đỡ các bạn trong quá trình học.</p>
<p>Mọi thắc mắc xin liên hệ tới:</p>
<ul>
<li>Facebook: <a target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100072417355186">https://www.facebook.com/profile.php?id=100072417355186</a> (Tạ Minh Huy)</li>
<li>Zalo: 0522566897</li>
<li>Email: <a href="mailto:&#72;&#x75;&#x79;&#97;&#116;&#49;&#56;&#x30;&#x35;&#x32;&#x32;&#x40;&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;">&#72;&#x75;&#x79;&#97;&#116;&#49;&#56;&#x30;&#x35;&#x32;&#x32;&#x40;&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;</a></li>
</ul>
<h2 id="Khai-niem"><a href="#Khai-niem" class="headerlink" title="Khái niệm"></a>Khái niệm</h2><p>Source: <a target="_blank" rel="noopener" href="https://www.techtarget.com/whatis/definition/binary-file#:~:text=A%20binary%20file%20is%20a,certain%20place%20within%20the%20file">https://www.techtarget.com/whatis/definition/binary-file#:~:text=A%20binary%20file%20is%20a,certain%20place%20within%20the%20file</a>.</p>
<p>Dù Google có rất nhiều nhưng mình xin tóm tắt lại:<br>Tệp nhị phân là một tệp mà nội dung của nó phải được chương trình hoặc bộ xử lý phần cứng hiểu trước chính xác cách nó được định dạng. Có nghĩa là, tệp không ở bất kỳ định dạng có thể nhận dạng bên ngoài nào để bất kỳ chương trình nào muốn tìm kiếm dữ liệu nhất định tại một vị trí nhất định trong tệp.</p>
<h2 id="Cach-dung"><a href="#Cach-dung" class="headerlink" title="Cách dùng"></a>Cách dùng</h2><h3 id="Khai-bao-file"><a href="#Khai-bao-file" class="headerlink" title="Khai báo file"></a>Khai báo file</h3><p>Trước tiên, chúng ta cần khai báo một con trỏ kiểu file. Việc khai báo này là cần thiết để có sự kết nối giữa chương trình và tập tin cần thao tác.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FILE *f;</span><br></pre></td></tr></table></figure>

<h3 id="Thao-tac-mo-file"><a href="#Thao-tac-mo-file" class="headerlink" title="Thao tác mở file"></a>Thao tác mở file</h3><p>Cấu trúc hàm fopen(): </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fopen(&lt;filename&gt;,&lt;mode&gt;)</span><br><span class="line">// Example:</span><br><span class="line"></span><br><span class="line">fopen(&quot;myFile.txt&quot;,&quot;wb&quot;) // wb: write binary (Ghi kiểu nhị phân)</span><br><span class="line">// wb cho phép bạn mở và ghi vào file theo kiểu nhị phân.</span><br><span class="line">fopen(&quot;myFile.txt,&quot;rb&quot;) // rb: read binary (Đọc file theo kiểu nhị phân)</span><br><span class="line">// rb chỉ cho phép bạn đọc mà không được ghi (Nhị phân).</span><br></pre></td></tr></table></figure>

<h3 id="Thao-tac-ghi-file"><a href="#Thao-tac-ghi-file" class="headerlink" title="Thao tác ghi file"></a>Thao tác ghi file</h3><p>Hàm fwrite():</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fwrite(address_data,size_data,numbers_data,pointer_to_file);</span><br></pre></td></tr></table></figure>
<p>Example:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">threeNum</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="type">int</span> n1, n2, n3;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> n;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span> <span class="title">threeNum</span> <span class="title">num</span>;</span></span><br><span class="line">   FILE *fptr;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">if</span> ((fptr = fopen(<span class="string">&quot;C:\\program.bin&quot;</span>,<span class="string">&quot;wb&quot;</span>)) == <span class="literal">NULL</span>)&#123;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;Error! opening file&quot;</span>);</span><br><span class="line"> </span><br><span class="line">       <span class="comment">// Program exits if the file pointer returns NULL.</span></span><br><span class="line">       <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">for</span>(n = <span class="number">1</span>; n &lt; <span class="number">5</span>; ++n)</span><br><span class="line">   &#123;</span><br><span class="line">      num.n1 = n;</span><br><span class="line">      num.n2 = <span class="number">5</span>*n;</span><br><span class="line">      num.n3 = <span class="number">5</span>*n + <span class="number">1</span>;</span><br><span class="line">      fwrite(&amp;num, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> threeNum), <span class="number">1</span>, fptr); </span><br><span class="line">   &#125;</span><br><span class="line">   fclose(fptr); </span><br><span class="line">  </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Thao-tac-doc-file"><a href="#Thao-tac-doc-file" class="headerlink" title="Thao tác đọc file"></a>Thao tác đọc file</h3><p>Hàm fread():</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fread(address_data,size_data,numbers_data,pointer_to_file);</span><br></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">threeNum</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">   <span class="type">int</span> n1, n2, n3;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> n;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span> <span class="title">threeNum</span> <span class="title">num</span>;</span></span><br><span class="line">   FILE *fptr;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">if</span> ((fptr = fopen(<span class="string">&quot;C:\\program.bin&quot;</span>,<span class="string">&quot;rb&quot;</span>)) == <span class="literal">NULL</span>)&#123;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;Error! opening file&quot;</span>);</span><br><span class="line"> </span><br><span class="line">       <span class="comment">// Program exits if the file pointer returns NULL.</span></span><br><span class="line">       <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">for</span>(n = <span class="number">1</span>; n &lt; <span class="number">5</span>; ++n)</span><br><span class="line">   &#123;</span><br><span class="line">      fread(&amp;num, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> threeNum), <span class="number">1</span>, fptr); </span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;n1: %d\tn2: %d\tn3: %d&quot;</span>, num.n1, num.n2, num.n3);</span><br><span class="line">   &#125;</span><br><span class="line">   fclose(fptr); </span><br><span class="line">  </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bài tập mẫu của phần này là: Nhập vào danh sách sinh viên, ghi vào file theo kiểu nhị phân.</p>
<p>Full source code: <a target="_blank" rel="noopener" href="http://codepad.org/aZlVtgsd">http://codepad.org/aZlVtgsd</a></p>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Ta Minh Huy</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://huytm2k3.github.io/2022/04/24/File-nhi-phan-trong-C/">https://huytm2k3.github.io/2022/04/24/File-nhi-phan-trong-C/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://huytm2k3.github.io">My name is TaMinhHuy! Welcome to my Blog</a>！</span></div></div></article><div id="pagination"><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2022/04/23/Con-tro-trong-C-C-Pointer/"><span>Con trỏ trong C/C++(Pointer)</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2022 By Ta Minh Huy</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>